@inject NavigationManager nav;
@inject ProtectedLocalStorage storage;
@inject UserController userController;
@inject ClientAuthController authController;
@inject IConfiguration _config;
@page "/"

<PageTitle>Home</PageTitle>


<div class="text-neutral-100 font-oswald h-screen flex flex-col items-center justify-center px-6 py-10">
    @* <h1 class="font-oswald font-medium text-neutral-100 text-left w-full text-2xl uppercase"><span class="font-light">Latest </span>Activity</h1>
    <div class="flex flex-col p-3 bg-neutral-800 w-full h-full gap-4">
        <div class="min-h-[100px] flex flex-col bg-neutral-700 shadow w-full py-2 px-3 justify-between">
            <p class="text-neutral-100 font-light text-sm"><span class="text-yellow-500 font-light tracking-widest">SESSION IN PROGRESS</span> Your session for today is still in progress. <a href="/" class="underline">Continue?</a></p>
            <p class="font-sans italic text-[10px] opacity-50 w-full text-end">March 3, 2023</p>
        </div>
        <div class="min-h-[100px] flex flex-col bg-neutral-700 shadow w-full py-2 px-3 justify-between">
            <p class="text-neutral-100 font-light text-sm"><span class="text-fuchsia-500 font-light tracking-widest">SESSION ENDED</span> You ended your session titled {title} early. You practiced for a total of 32:43.</p>
            <p class="font-sans italic text-[10px] opacity-50 text-end">March 3, 2023</p>
        </div>
        <div class="min-h-[100px] flex flex-col bg-neutral-700 shadow w-full py-2 px-3 justify-between">
            <p class="text-neutral-100 font-light text-sm"><span class="text-emerald-500 font-light tracking-widest">SESSION COMPLETED</span> You completed the session titled “Rachmaninov.” You practiced for a total of 02:23:32.</p>
            <p class="font-sans italic text-[10px] opacity-50 w-full text-end">March 3, 2023</p>
        </div>
    </div>
    <button @onclick="authController.Logout">LOGOUT</button> *@
</div>

@code{
    #pragma warning disable CS8604
    protected override async Task OnInitializedAsync()
    {
        UserAuthModel authUser = await authController.CheckStorage();
        if (authUser != null && authUser.Authorized)
        {
            nav.NavigateTo("/dashboard");
        }
        else
        {
            await authController.Logout();
        }
    }
}